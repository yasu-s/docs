# DevSumi 2019 Day1

## 14-A-5: ビズリーチは新規事業でなぜKotlinを選んだのか

### セッション詳細

* 講演者: 大谷 弘喜[ビズリーチ]
* 資料： 

### ビズリーチの新規事業

* 本社と離れた場所で新規事業を行っている

### HumanOS/HRMOS Core

* HRMOS
  * リクルーティング
  * パフォーマンスマネジメント（今年の春リリース）
  * エンゲージメント
  * 採用の仕組み、採用が正しかったのかなどを分析
  * HRMOS Core: DB
* クラウド型人材DB
* Web API経由でデータ通信
* RPA機能あり

### HRMOS Coreの技術選定

* 基本方針
  * クラウドマネージド
  * シンプルな構成
  * シンプルなアーキテクチャ
* 開発スピードをあげるために
  * 枯れた技術
  * 開発するエンジニアの属性（どんな技術のエンジニアを採用できるか）
* 10年以上メンテナンスするための構成
  * 技術トレンドに左右されない（フロントエンドは回転が早いのでのぞく）
  * 枯れた技術から移行しやすいこと
* 人事DBの特性
  * アクセス数：少ない、時期の波動あり
  * データ量：想像するより多くない
  * 検索性：比較的複雑
  * エンジニアの熟練度と集計に強い -> RDB
  * Aurora PostgreSQLを採用
    * 巨大なReadレプリカが作成可能
* マイクロサービス or Appサーバー
  * 依存関係（モジュール・DB）とエンジニアの習熟度から Appサーバーを採用
  * Beans Talk(ECSに移行予定)
* ユーザ認証
  * Cognitoユーザープール
  * 認証のブラックボックス化が可能
  * 開発者がやるより強固なセキュリティ
* RPAの実行
  * AWS Lambda上で実行
  * エンドユーザがJSを記述
  * SNSでキュー管理をしてLambda実行
* 開発言語の選定
  * 会社としてJava技術者が多い
  * Java/Scala/Kotlinから選択
  * なぜKotlinか
    * 冗長性の排除・Null安全
    * Javaの資産を利用可能
* Kotlinの採用箇所
  * Appサーバ
  * Lambda
  * 開発言語を統一して学習コストを下げる
* フロントエンドについて
  * 部分的にVue.jsを採用、基本はサーバサイドHTML
  * Spring Bootを採用
  * Vue.jsのSSRで対応
* ORM
  * Kotlin純正のExposedを採用
  * 複雑な処理はJDBC TemplateでSQLを使用
* アプリケーションレイヤ
  * Service, Repositoryの間にDomain層を配置

----

## 14-B-6: ヤフー株式会社におけるフロントエンドの取り組み

### セッション詳細

* 講演者: 向井 咲人[ヤフー], 森本 恭平[ヤフー], 平山 涼也[ヤフー]
* 資料： https://www.slideshare.net/techblogyahoo/devsumi2019-14b6-devsumib-131748750
* 参考ブログ: ヤフー株式会社におけるWebフロントエンドの技術選定： https://techblog.yahoo.co.jp/advent-calendar-2018/yahoo-frontend/

### メディアカンパニー統括本部のフロントエンド

* 体制
  * フロントエンド開発チーム：１２人（刷新３〜１０、機能開発３〜４）
  * 開発年数：１０年以上
  * その他バックエンドなどのエンジニアもいて大規模
* 採用技術：React/TS/Redux/Node.js
* Redux-Form, Sass, webpackなどに移行中
* 刷新をしながら機能開発
* コードレビューが増加

### フロントエンドの課題解決について

* Lint/Prettierでコーディング規約を設ける
* 上記でカバーできないコーディングガイドでカバー
  * ツールはGitBookを使用
* Dangerの導入。PRのタスクの自動化
* TypeScriptの導入。コンパイル時に型チェックでエラーがでるのでよい。
* Atomic Designの導入。コンポーネント粒度を揃える。
* コンポーネントガイド。コンポーネントの見える化。すでにあるコンポーネントかどうかわかる。Storybook/docz
* Redux層の分割。ファイル構成にre-ducksを採用。Domain/UI層を分割。

### コマースカンパニーの取り組み

* YahooショッピングではABテストをガンガンまわしている。
* UIパーツ集の作成：ボタンやアイコンなどを共通化。Atomic Design化。
* React/TS/Sass
* UIドキュメントの生成：Storybook/Github Pagesにアップロード
* 社内限定でNPMパッケージ化を検討
* 全ページでUIパッケージ化
* ABテスト時はUIパッケージを使用中止して独自UIで実装。
* コンポーネント化されるのでエンジニアも気軽にABテストが可能になる。
* 簡単なデザインならコンポーネントの組み合わせで可能なため、デザイナーがいらないケースも。
* 良い結果のデザインをパッケージ化。配信できる。質の良いデザインを全出面で共有できる。

### Webフロント技術室の取り組み

* 個別最適化の弊害
  * リソースがないチームはモダン化されない
  * 人材流動ができなくなる
  * ナレッジが会社に残らない
* ヤフー全体のWebフロントエンドの課題解決
* よく使われているライブラリの効率化
* パフォーマンスの計測方法の統一化
* 全サービスのライブラリ使用状況を確認
* フレームワークの統一は現実的ではない
  * デザイナーもJSを書くため
  * 流動的なので時期的によくない
* スタイルをの統一をしない
  * スタイル周りは流動的なので時期的によくない
* 全社的にTypeScriptを採用
  * 静的型付け：IDEでリアルタイムでチェックできる
  * JS互換性：TSを一部採用も可能。
  * クラスベースのOOP
* TypeScriptの課題
  * スキルの差
  * ドキュメントの整備
  * サポート体制

----

## 14-E-7: カオス化した組織とエンタープライズシステム群を、モダン化したい！

### セッション詳細

* 講演者: 内藤 千稔[パーソルキャリア]
* 資料： 

### ３年かけて対応

* サービス化・ドメイン駆動設計の導入

### ３年前の見られ方

* システムは肥大化・サブシステム３０、３２０画面、３００帳票
* 開発が遅い、障害多い、社内の抵抗勢力

### ３年前の状況

* 目的は変えることであって早くやることではない
* 1ヵ月のインシデントは４０％消化
* 9人で9事業カバー。

### ケイパビリティの拡大

* 9 -> 21人に拡大 （内製１０名）。将来的に必要な人を採用
* 工数の見える化
* 保守が対流しづらい体制に移行
* パフォーマンス担当を専任にして継続的チューニング

### サービス化

* 課題
  * 複数ユーザの存在
  * 開発生産性
  * 保守性
* アーキテクチャの基本子孫
  * すばやく殉難に変更できる
  * 流用可能な班彪性
  * データアクセスの特性を加味
* アーキ層を分割
* 機能単位の改修・デプロイを容易に
* SPA化
  * Angular/IgniteUI/TypeScript
  * ASP.NET MVC
* アーキテクチャ・アーキテクトチームの育成
  * サブシステムをつくるタイミングでアーキに強いベンダーを読んで作成
  * プロトタイプの作成を内製化して力をつける
* 開発全体で３０％程度の工数削減
* 他システムへの資源の流用も可能
* 静的解析・コードカベレッジの採用で受け入れ担当のスキル差に依存しにくくなった
* 自動化にAzureDevOps採用（Office365を採用しているため採用の敷居がひくかった）
* エラーチェックをフロント・バックのどちらでどれくらいするかが課題。
* サーバーサイドのUTのみでとどまる。（工数的に）

### キカクカイハツの変革

* PMBOK -> UML -> 改修のルール -> 人的交流 -> Scrum -> ドメイン駆動
* Scrumで検証
  * 局所的なプロセスの最適化はできた
* ドメイン駆動設計
  * 全体プロセスを価値のつながりを再整理
  * ドメインごとの進化と保留の判断
  * 継続的に価値を高める組織割につなげる
* プロセス中心から価値中心
* ドメインごとにチームを分割・組織化

----

## 14-C-8: みんなの暮らしを支えるAmazon S3の裏側、お伝えします

### セッション詳細

* 講演者: 焼尾 徹[アマゾン ウェブ サービス ジャパン]
* 資料： https://www.slideshare.net/devsumi/14c8amazon-s3

### Amazon S3の概要

#### S3/ Glacierの歴史

* S3は容量制限なくデータ保存可能なオブジェクトストレージ
* S3 Glacier はアーカイブ向けストレージ。安全性・コスト効率を重視
* Glacierへのアーカイブは2012年から
* S3のデータをクエリで呼べるAthenaを提供。2016年から
* S3 Select/Gracier Selectは他サービスから呼ばれる前提
* Glacierへの直接PUTが可能（以前はS3経由で移動していた）

#### データストアの選択

* データベース
  * RDB
  * NoSQL
* ストレージ
  * ブロックストレージ：OSがHDDにアクセス
  * ファイルストレージ：ファイルシステム
  * オブジェクトストレージ：オブジェクトにアクセスするためのユニークなIDで構成されるデータ倉庫
* オブジェクトストレージから別のデータストアにロード
* DBをデータ退避

### Amazon S3の裏側

* 書き込みレート：100回/秒 PUT,POST,DELETE
  * 3,500回/秒に拡張
* 読み込みレート：500回/秒 GET
  * 5,500回/秒に拡張
* パーティション分割を自動的に制御。負荷の多い箇所をパーティション化される。
* プレフィクスを意識しないですむように。
* 読み込みが多い場合、CDNのCloudfrontを使用した方がよい。（パブリックな場合）
* リクエストレートが向上してもレイテンシを直接短縮するものではない。
* S3を支えるマイクロサービス。統計情報、チェックサムの確認。冗長性の確認などの２３５以上のマイクロサービスが動いている
* ３つ以上のアベイラビティゾーンにS3のデータを格納
* ECRはS3を裏でつかっている。

----

# Day2

## 15-E-5: Less Code & Have Fun! IoTアプリ開発をはじめる際のポイント

### セッション詳細

* 講演者: 山崎 亘[ウフル]
* 資料： https://speakerdeck.com/wyamazak_uhuru/start-iot-appdev-with-enebular

### そもそもIoTアプリ開発って

* デバイスからデータをとって処理する
  * デバイス
  * 処理
  * クラウドにデータをもっていく
  * 複数のテクノロジーが必要
* センサーからのデータ取得
  * センサーの種類
  * センサーの位置
  * データ取得間隔
  * 試行錯誤が必要
* PDCAサイクルをまわして精度の向上が必要
  * DevOpsがいったりきたり
* 複数のテクノロジーを簡単に扱える＋PDCAを速くまわせる

### SHARE MY FUN

* Node-RED
  * Webブラウザからフロー編集可能
  * Node.js上に構築
* ローカル以外にもクラウドでも使用可能
* enebular の紹介

### IoTアプリを開発

* 見守りアプリ
  * 遠隔地に通知：Slack通知、メール通知。通知内容はフロー上に記載
  * 規定値以下の気温 or 規定値以上の気温
* enebular editor（Electron・デスクトップ版）でNode-REDの編集可能
* コーディング不要
* 閾値などの調整をGUIから調整可能。
* センサー - Netatmo - enebular - Heroku
* リモートのラズパイにデプロイ可能。複数端末も同時に可能
* データ可視化用のツールあり

### Step up

* ループ処理もノンコーディング
* Node-RED のデザインパターンあり
  * https://qiita.com/zuhito/items/e9abfd6f1ba188f908ed
* Node-RED のアンチパターン１０選
  * https://qiita.com/zuhito/items/442a8b99c597150f8472
* チームの場合、権限付与が必要
* アセットの公開＋共有が可能

----

## 15-A-6: プロダクトをGrowthさせるデータ駆動戦略の基礎知識

### セッション詳細

* 講演者: 石垣 雅人[DMM.com]
* 資料： https://speakerdeck.com/i35_267/hurotakutowogrowthsaserutetaqu-dong-zhan-lue-falseji-chu-zhi-shi

### データ駆動戦略とは何か？

* データ・ドリブンに戦略を組み立てる
* 不確実性に強い組織へ
* 直感に頼る仮説は量産され、バックログを肥大化させやすい。
* リリース後にデータがないと学習できず仮説ができない
* データ駆動戦略とは
  * プロダクトの状態を可視化
  * 仮説・施策を作り、売り上げに貢献
  * 意思決定を最速化
  * 意思決定を定量的に共有
  * 未来を予測して戦略が作れる
* ３種の神器
  * データ分析基盤
  * 優れた指標（指標に基づくKPI）
  * 開発プロセス

### データ駆動戦略な組織

* SoE/SoR
* ドメインごとに自己組織化（ScrumTeam）
* データ・ドリブンの意思決定
* データアナリストとPOでデータ戦略
* ユーザー行動ログ・購買履歴から仮説立案

### ユーザーレビュー基盤

* ユーザーレビューの仕組みを１チームで管理。行動ログをトラッキング

### データ分析基盤

* データアナリストが分析しやすい状態にする
* DWH：数億レコード
* BIツール：Re:dash
* エンジニア、営業、誰でもクエリを使って分析できるように

### 優れた指標

* データを見ることで次の行動につながること
* ３つの土台
  * 比較
  * わかりやすい
  * 比率・割合
* ４つの指標
  * 定量的・定性的
    * レビュー増加率
    * レビュアー増加率
    * レビュアー種別増加率
    * レビュー経由購入率
  * 虚栄・本物
    * 虚栄の指標 = 次の行動につながらない指標
    * 本物の指標 = 次の行動につながる指標
      * 新規レビュアー率
      * アクティブレビュアー率
  * 先行・遅行
    * 先行指標：未来を予測
    * 遅行指標：変動後の数値を示す指標
  * 相関・因果
    * 相関：AとBが関係
    * 因果：A to B

### 開発プロセス

* Lean/Agile/Agile-Marketing
* 仮説に妥当性をもたせる
  * BMLループ
  * ABテスト
  * プロバクトバックログを減らす効果
* 効果検証
  * データ計測
  * KPIに落とし込む

### アジャイルマーケティングなキャンペーン

* アジャイルやリーンを適応
* キャンペーン中にニアタイムにデータを取得、小さくはじめて、小さく改善。
* 過去のキャンペーンのデータを蓄積・計測。計測→学習。
* 可視化すべき指標
  * 想定される効果
  * キャンペーンを終了させる基準
  * 成功した時のリソースを再分配

----

## 15-A-7: Webサーバー利用だけではないNGINXソリューション

* 講演者: 田辺 茂也[NGINX]
* 資料： https://speakerdeck.com/nginx_jp/developers-summit-2019

### NGINXの紹介

* NGINX Plus
  * ロードバランサー
  * Webサーバー
  * コンテンツキャッシュ
* NGINX Controlker
  * NGINX Plusの集中監視・管理
* NGINX WAF
  * Webアプリケーションファイアウォール
* NGINX Unit
  * 新しい動的なWeb・アプリケーションサーバー
* アプリインフラは複雑
  * NGINXにより１０倍簡素化
* NGINXアプリケーションプラットフォーム

### NGINX Plus

* 豊富なメトリック
* 負荷分散
* ヘルスチェック
* サービスレジストリ
* エンタープライズサポート
* ダッシュボードで情報が見える
* API Gatewayとして使用
  * ルーティングなどを制御
  * カナリアリリースなどの制御

### NGINX WAF

* WEBアプリケーションファイアウォール
* レイヤ７攻撃保護
* DDoS緩和
* 監査ログ

### マイクロサービスへの取り組み

* さまざまなマイクロサービスアーキテクチャをサポート
  * Proxy Model
  * Router Mesh Model
  * Fabric Model
* NGINX Unit
  * ダイナミックWeb・アプリケーションサーバー
  * 多言語に対応：Node.js, Python, PHP, Go, Ruby, Java
  * RESTful JSON API での動的設定
  * オープンソース
* Dockerによるデモ
  * curlで設定変更
* 動的なルーティング：サービスの検出
  * Autoスケール時
  * NGINX Plusでロードバランスする。SRVレコードでディスカバリ
  * DNSサービスディスカバリ

### NGINX Controller

* NGINX Plusから統計情報ｗ集約
* nginx.confの編集
* API管理
* 設定をテンプレートとして作っておき、複数のインスタンスに流すことも可能
* 設定の差分チェック機能

----

## 15-C-8: とにかく明るい！「Fun! Done! Learn!」でデブサミを振り返ってみましょう！

### セッション詳細

* 講演者: ヴァッサー ジャンバティスト[yamaneco], 安井 力, 川口 恭伸[アギレルゴコンサルティング], 有野 雅士[アトラクタ]
* 資料： 
* 参考ブログ: https://qiita.com/yattom/items/90ac533d993d3a2d2d0f

### ワークショップ

* １０人程度のチームに分かれてデブサミの振り返り
* Fun/Done/Learn形式でまとめる
* 他の人の知識の共有
* 時間が経って忘れる前に振り返り

----
